---
created: 2025-02-04 16:49
category:
  - design-pattern
tags:
  - TIL
last_modified: 2025-02-04T17:43:00
---
## ⭐ 마이크로서비스 아키텍처 (Microservices Architecture)
### 🍪 개념
- 애플리케이션을 작은 단위의 독립적인 서비스들로 구성하는 아키텍처 스타일.
- 각 서비스는 특정한 비즈니스 기능을 담당하며, 서로 독립적으로 개발, 배포, 확장 및 유지보수할 수 있다.
- 서로 다른 프로그래밍 언어나 데이터베이스를 사용할 수 있다.
- 일반적으로 API(REST, gRPC 등)를 통해 서로 통신하며, 분산 시스템을 구성한다.
---
### 🍪 기존 방식과의 차이
- 마이크로서비스 아키텍처는 기존 방식([[모놀리식 아키텍처]])과 대조되며, 현대적인 클라우드 기반 애플리케이션에 널리 사용된다.
- 기존 시스템은 하나의 시스템 자원을 공유하며, 하나의 덩어리안에서 서비스를 제공한다.
- 마이크로서비스는 이와 반대로, 여러개의 서버에서 각기 다른 프레임워크로, 개별적 Database를 이용해 독립적으로 서비스를 한다.
- 서비스를 작은 단위로 쪼갰기때문에 CI/CD(지속적통합/지속적제공)의 적용이 적합하다.
- 작은 단위로의 서비스 분리로 인해 모놀리식서비스보다 더 많은 서버와 인력, 비용이 필요하다. (+ 인력 간 커뮤니케이션이 느려질 수 있다. )
- ![Monolith VS Microservices](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcMDvmp%2FbtrzwmCsL0l%2Fzm6i6I7lbr18rSwvjeKzd0%2Fimg.png)
---
### 🍪 특징
#### 🍬 서비스의 독립성
- 하나의 애플리케이션을 여러 개의 작은 서비스로 나누어 관리한다.
- 각 서비스는 특정한 비즈니스 도메인을 담당한다.
- 서비스별로 개별적 배포가 가능하다 -> 전체 시스템을 중단하지 않고도 업데이트가 가능하다.
- 특정 서비스만 확장([[Scale-up과 Scale-out|Scale-out]])할 수도 있어 효율적인 리소스 사용이 가능하다.
- 서비스별로 다른 기술 스택을 선택할 수 있다.
	- ex: 주문 서비스(Java, MySQL), 결제 서비스(Node.js, MongoDB)
#### 🍬 분산 시스템 및 서비스 간 통신
- 서비스 간에는 주로 HTTP/REST API, gRPC, 메시지 큐(Kafka, RabbitQM) 등을 이용하여 통신한다.
- 서비스 간 네트워크 통신이 필수적 -> 장애 발생 시 이를 고려한 설계가 필요하다.
#### 🍬 독립적인 데이터 관리
- 각 서비스는 자신만의 데이터베이스를 관리할 수 있다.
- 데이터베이스를 공유하지 않으며, DB 연동이 필요할 경우 API 또는 이벤트 기반 방식을 활용한다.
#### 🍬 장애 격리 (Fault Isolation)
- 특정 서비스에 장애가 발생하더라도 전체 시스템이 영향을 받지 않도록 설계한다.
- Circuit Breaker 패턴 (ex: Netflix Hystrix) 등을 적용하여 장애 전파를 방지한다.
---
### 🍪 장단점
#### 🍬 장점
- 다양한 기술스택 사용이 가능하다.
	- 각 서비스에 적합한 기술을 선택할 수 있다.
- 특정 서비스만 독립적으로 확장이 가능하다.
	- ex: 주문서비스가 트래픽이 많다면 해당 서비스만 Scale-up한다.
- 작은 서비스 단위로 개발 및 배포가 가능하다.
	- 개발 속도가 빠르고, 실험적 기능을 빠르게 도입할 수 있다.
	- CI/CD 적용이 용이하다.
- 하나의 서비스에 문제가 발생해도 다른 서비스에 영향을 미치지 않는다. (장애 격리)
- 서비스 단위 테스트가 쉽다.
	- 서비스가 작고 대부분이 지정된 인터페이스에 의해 구성되어, 기능 테스트는 인터페이스 단위의 테스트에 집중하면 된다.

#### 🍬 단점

| 단점                         | 해결 방안                                  |
| -------------------------- | -------------------------------------- |
| 서비스 간 네트워크 통신 부담 증가        | API Gateway, 메시지 큐(Kafka, RabbitMQ) 활용 |
| 데이터 일관성 유지 어려움             | 이벤트 소싱(Event Sourcing), SAGA 패턴 활용     |
| 분산 시스템으로 인해 배포 및 운영 복잡도 증가 | 컨테이너(Docker, Kubernetes) 및 자동화 도구 활용   |
| 서비스 간 장애 전파 가능성            | Circuit Breaker 패턴, 모니터링 시스템 구축        |
| 초기 구축 비용 및 시간 증가           | 점진적 전환(모놀리식 → 마이크로서비스)                 |

---
### 🍪 사용 사례
- Netflix
- Google: Gmail, Youtube 등 다양하나 서비스를 개별적으로 운영.
- Amazon: 제품 카탈로그, 장바구니, 주문 처리 등을 별도 서비스로 운영
- Uber: 승객 매칭, 결제, 내비게이션 등을 독립 서비스로 구성.
---
### 🍪 마이크로서비스 아키텍처가 적합한 경우
- 대규모 트래픽을 처리해야 하는 경우.
- 여러 팀이 병렬적으로 개발해야 하는 경우.
- 서비스별 독립적인 배포 및 확장이 필요한 경우.
- 다양한 기술을 사용해야 하는 경우.

> 작은 규모의 프로젝트라면, 유지보수 부담이 증가할 수 있으므로 모놀리식 아키텍처가 더 적합할 수 있다.
---
## 🧙‍♂️ 요약
> 마이크로서비스 아키텍처(MSA)는 애플리케이션을 작은 단위의 독립적인 서비스로 분리하여 개발, 배포, 확장 및 유지보수를 용이하게 하는 아키텍처 스타일이다.

- 마이크로서비스 vs 모놀리식
	- 모놀리식: 하나의 거대한 애플리케이션
	- 마이크로서비스: 여러개의 독립적인 작은 서비스
	- CI/CD 및 확장성에 마이크로서비스가 유리하지만, 운영 및 네트워크 비용 증가.

- 특징
	- 독립성: 특정 서비스만 업데이트, 배포, 확장 가능
	- 분산 시스템: 서비스간 통신 필요, 장애 대비 설계 필요
	- 독립적 데이터 관리
	- 장애 격리

- 마이크로서비스 아키텍처는 대규모 서비스 운영에 적합하지만, 설계와 운영이 복잡하여 충분한 고려가 필요하다.
---
### 📝 추가 학습
- 모놀리식 아키텍처
- 메시지큐?
---
> **참고사이트**
> - [01-블로그](https://freeend.tistory.com/115)
> - [02-AWS](https://aws.amazon.com/ko/microservices/)
> - [03-블로그](https://gruuuuu.github.io/cloud/architecture-microservice/)
> - [04-블로그(클라우드와 MSA)](https://blog.naver.com/yooncoms/222864186095)
> - [05-쿠팡의 MSA 전환](https://medium.com/coupang-engineering/how-coupang-built-a-microservice-architecture-fd584fff7f2b)
> - ChatGPT
