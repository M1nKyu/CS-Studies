---
created: 2025-02-12 15:46
category:
  - network
  - web
tags:
  - TIL
last_modified: 2025-02-12T18:57:00
---
## â­CORS (Cross-Origin Resource Sharing)

### ðŸª Origin
- Originì€ í”„ë¡œí† ì½œ(Protocol) + í˜¸ìŠ¤íŠ¸(Host) + í¬íŠ¸(Port)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì •ì˜ëœë‹¤.
- ![Origin|600x300](https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8g-wHZd7EmekjtL9BV3RBw.png)
	- [ì´ë¯¸ì§€ ì¶œì²˜](https://medium.com/@jvito11904/cors%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C-f26a3eb5e8a2)

- ë™ì¼ ì¶œì²˜ ì˜ˆì‹œ
	- `https://example.com:443/page1.html`
	- `https://example.com:443/api/data`
	- ê°™ì€ í”„ë¡œí† ì½œ(`https`) + ë„ë©”ì¸(`example.com`) + í¬íŠ¸(`443`)

- ë‹¤ë¥¸ ì¶œì²˜(Cross-origin) ì˜ˆì‹œ -> CORS í•„ìš”
	- `https://example.com` â†’ `https://api.example.com` (ì„œë¸Œë„ë©”ì¸ì´ ë‹¤ë¦„)
	- `https://example.com` â†’ `http://example.com` (í”„ë¡œí† ì½œì´ ë‹¤ë¦„)
	- `https://example.com` â†’ `https://example.com:8080` (í¬íŠ¸ê°€ ë‹¤ë¦„)
		- HTTP ì„œë²„ëŠ”Â `80` í¬íŠ¸ ì´ìš©
		- HTTPS ì„œë²„ëŠ” `443` í¬íŠ¸ ì´ìš©

> ì¶œì²˜ê°€ ë‹¤ë¥´ë©´ ê¸°ë³¸ì ìœ¼ë¡œ ìš”ì²­ì´ ì°¨ë‹¨ë˜ë©°, ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ CORSê°€ í•„ìš”í•˜ë‹¤.
---
### ðŸª ë™ì¼ ì¶œì²˜ ì •ì±… (Same-Origin Policy, SOP)
> ì›¹ ë¸Œë¼ìš°ì €ì˜ ê¸°ë³¸ ë³´ì•ˆ ì •ì±… ì¤‘ í•˜ë‚˜.
#### ðŸ¬ SOP ë“±ìž¥ ë°°ê²½
> ì´ˆì°½ê¸° ì›¹ ë³´ì•ˆ ë¬¸ì œ ì¤‘ í•˜ë‚˜ë¡œ CSRF(ì‚¬ì´íŠ¸ ê°„ ìš”ì²­ ìœ„ì¡°)ê°€ ìžˆë‹¤.

- CSRF ê³µê²© ì˜ˆì‹œ
	1. ì‚¬ìš©ìžê°€ ë³¸ì¸ì˜ ì€í–‰ ì‚¬ì´íŠ¸ì— ë¡œê·¸ì¸í•œë‹¤.
	2. ì‚¬ìš©ìžê°€ ì•…ì„± ì›¹ ì‚¬ì´íŠ¸ë¥¼ ì—´ì–´ë³¸ë‹¤.
	3. ì•…ì„± ì›¹ ì‚¬ì´íŠ¸ê°€ ì‚¬ìš©ìžì˜ ì¿ í‚¤ ì •ë³´ë¥¼ í™œìš©í•˜ì—¬ ì€í–‰ ì‚¬ì´íŠ¸ë¡œ ìœ„ì¡°ëœ ìš”ì²­ì„ ì „ì†¡í•œë‹¤
	4. ê³µê²©ìžëŠ” ì‚¬ìš©ìžì˜ ê³„ì¢Œì—ì„œ ìžê¸ˆì„ ì´ì²´í•˜ê±°ë‚˜ ì •ë³´ë¥¼ í›”ì¹  ìˆ˜ ìžˆë‹¤.
- ì´ëŸ¬í•œ ë³´ì•ˆ ë¬¸ì œë¥¼ ë§‰ê¸° ìœ„í•´ ë™ì¼ ì¶œì²˜ ì •ì±…(Same-Origin Policy)ê°€ ë„ìž…ëë‹¤.

#### ðŸ¬ SOP ê°œë…
- ì›¹ ë¸Œë¼ìš°ì €ëŠ” ë³´ì•ˆìƒ ì´ìœ ë¡œ, ìŠ¤í¬ë¦½íŠ¸ê°€ ë™ì¼í•œ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ë§Œ ì ‘ê·¼í•  ìˆ˜ ìžˆë„ë¡ ì œí•œí•œë‹¤.
- A ì›¹ì‚¬ì´íŠ¸ì—ì„œ ì‹¤í–‰ëœ JavaScriptê°€ B ì›¹ì‚¬ì´íŠ¸ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ ê¸°ë³¸ì ìœ¼ë¡œ ì°¨ë‹¨í•œë‹¤.
- ë™ì¼í•œ ì¶œì²˜(Origin)ì—ì„œë§Œ ë¦¬ì†ŒìŠ¤ ìš”ì²­ì´ ê°€ëŠ¥í•˜ë„ë¡ ì œí•œí•˜ëŠ” ê²ƒì´ í•µì‹¬ì´ë‹¤.

- SOPë¥¼ í™•ì¸í•˜ëŠ” ì£¼ì²´ëŠ” ë¸Œë¼ìš°ì €ì´ë‹¤.
	- ë§Œì•½ SOPë¥¼ ìœ„ë°˜í•˜ëŠ” ìš”ì²­ì„ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë³´ë‚´ë©´, ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë‹µí•˜ì—¬ë„ ë¸Œë¼ìš°ì €ëŠ” ê·¸ ì‘ë‹µì„ ì²˜ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤.

> ë™ì¼ ì¶œì²˜ ì •ì±…ì€ ê°•ë ¥í•œ ë³´ì•ˆ ê¸°ëŠ¥ì´ì§€ë§Œ, ìœ ì—°ì„±ì´ ë¶€ì¡±í•˜ë‹¤.
	- ì‹ ë¢°í•  ìˆ˜ ìžˆëŠ” ì™¸ë¶€ APIë‚˜ ì„œë¹„ìŠ¤ì™€ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ ë•Œ ì œí•œì´ ê±¸ë¦´ ìˆ˜ ìžˆë‹¤. 
	- ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë“±ìž¥í•œ ê²ƒì´ CORS.
---
### ðŸª CORS (Cross-Origin Resource Sharing, êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ ê³µìœ )ëž€?
> ë‹¤ë¥¸ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ ê³µìœ ì— ëŒ€í•œ í—ˆìš©/ë¹„í—ˆìš© ì •ì±…
- CORSëŠ” ì„œë¡œ ë‹¤ë¥¸ ë„ë©”ì¸ì—ì„œ ë¡œë“œëœ í´ë¼ì´ì–¸íŠ¸ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì™¸ë¶€ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìžˆë„ë¡ í•´ì£¼ëŠ” ë§¤ì»¤ë‹ˆì¦˜ì´ë‹¤.
- ex (CORSê°€ í•„ìš”í•œ ê²½ìš°):
	- ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì™¸ë¶€ APIì—ì„œ ë‚ ì”¨ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
	- ê³µìš© í°íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ í°íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤.
	- ë™ì˜ìƒ í”Œëž«í¼ APIì—ì„œ ì˜ìƒì„ ê°€ì ¸ì˜¨ë‹¤.
> CORSë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸(ì›¹ ë¸Œë¼ìš°ì €)ëŠ” ì™¸ë¶€ ì„œë²„ê°€ í•´ë‹¹ ìš”ì²­ì„ í—ˆìš©í•˜ëŠ”ì§€ ë¨¼ì € í™•ì¸ í›„ ë°ì´í„°ë¥¼ ê°€ì¡ê²Œ ëœë‹¤.

#### ðŸ¬ CORS ë™ìž‘ ë°©ì‹
> ì›¹ ë¸Œë¼ìš°ì €ê°€ ì™¸ë¶€ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚¼ ë•Œ, ë‹¤ìŒê³¼ ê°™ì€ ê³¼ì •ì´ ì§„í–‰ëœë‹¤.
1. ë¸Œë¼ìš°ì €ê°€ ìš”ì²­ì— `Origin` í—¤ë”ë¥¼ ì¶”ê°€í•œë‹¤.
	- ex: `Origin: https://news.example.com`
2.  ì„œë²„ê°€ ìš”ì²­ì„ í™•ì¸í•œ í›„ `Access-Control-Allow-Origin` í—¤ë”ë¥¼ ì‘ë‹µì— í¬í•¨ì‹œí‚¨ë‹¤.
	- ex `Access-Control-Allow-Origin: https://news.example.com`
3. ë¸Œë¼ìš°ì €ê°€ ì‘ë‹µì„ í™•ì¸í•œ í›„ í•´ë‹¹ ë°ì´í„°ì˜ ê³µìœ ë¥¼ í—ˆìš©í•œë‹¤.

> ë§Œì•½ ì„œë²„ê°€ í•´ë‹¹ ì¶œì²˜(Origin)ì—ì„œì˜ ìš”ì²­ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ë¸Œë¼ìš°ì €ëŠ” CORS ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.

#### ðŸ¬ CORS ì„¤ì • ì˜ˆì‹œ
- `https://news.example.com` ì‚¬ì´íŠ¸ê°€ `https://partner-api.com`ì˜ API ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  ì‹¶ë‹¤ë©´
- `partner-api.com` ì„œë²„ëŠ” ë‹¤ìŒê³¼ ê°™ì´ CORS ì„¤ì •ì„ ì¶”ê°€í•´ì•¼ í•œë‹¤.
	- ì„¤ì •í•˜ë©´ `news.example.com`ì—ì„œ `partner-api.com` APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.
```http
Access-Control-Allow-Origin: https://news.example.com
```

- ì—¬ëŸ¬ ê°œì˜ ë„ë©”ì¸ì„ í—ˆìš©í•˜ë ¤ë©´ ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„í•˜ê±°ë‚˜ `*`ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ì¶œì²˜ë¥¼ í—ˆìš©í•  ìˆ˜ ìžˆë‹¤. (ë³´ì•ˆìƒ `*`ëŠ” ê¶Œìž¥í•˜ì§€ ì•ŠëŠ”ë‹¤.)
```http
Access-Control-Allow-Origin: *
```

#### ðŸ¬ CORSì˜ ë³´ì•ˆ ê³ ë ¤ ì‚¬í•­
- `Access-Control-Allow-Origin: *`ì„ ì‚¬ìš©í•˜ë©´ ëª¨ë“  ì¶œì²˜ì—ì„œ ìš”ì²­ì„ í—ˆìš©í•˜ë¯€ë¡œ ë³´ì•ˆìƒ ìœ„í—˜ì´ í¬ë‹¤.
- ë¯¼ê°í•œ ì •ë³´ë¥¼ ë‹¤ë£¨ëŠ” APIëŠ” íŠ¹ì • ë„ë©”ì¸ë§Œ í—ˆìš©í•˜ë„ë¡ ì„¤ì •í•´ì•¼ í•œë‹¤.
- `Access-Control-Allow-Credentials: true`ë¥¼ ì‚¬ìš©í•  ê²½ìš°, `*`ë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤. (íŠ¹ì • ë„ë©”ì¸ì„ ì§€ì •í•´ì•¼ í•œë‹¤.)
---
### ðŸª CORS ìž‘ë™ ë°©ì‹ 3ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤
> CORSê°€ ë™ìž‘í•˜ëŠ” ë°©ì‹ì€ ì„¸ ê°€ì§€ì˜ ì‹œë‚˜ë¦¬ì˜¤ì— ë”°ë¼ ë³€ê²½ëœë‹¤.
#### ðŸ¬ 1. ì‚¬ì „ ìš”ì²­ (Preflight Request)
> ê¸°ë³¸ì ìœ¼ë¡œ `GET`,`POST`,`HEAD` ìš”ì²­ì€ ê°„ë‹¨í•œ ìš”ì²­(Simple Request)ì´ë¯€ë¡œ ë°”ë¡œ ìš”ì²­ì„ ë³´ë‚´ë©´ ëœë‹¤.
> í•˜ì§€ë§Œ, ë‹¤ìŒê³¼ ê°™ì€ ê²½ìš° ë¸Œë¼ìš°ì €ëŠ” ì‹¤ì œ ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ì— Preflight ìš”ì²­ì„ ë³´ë‚¸ë‹¤.
1. `GET`, `POST`, `HEAD` ì´ì™¸ì˜ HTTP ë©”ì„œë“œ(OPTIONS)ë¥¼ ì‚¬ìš©í•  ê²½ìš° (`PUT`, `DELETE` ë“±)
2. íŠ¹ì • í—¤ë”ë¥¼ í¬í•¨í•  ë•Œ (`Content-Type`ì´ `application/json` ë“±)

- ë¸Œë¼ìš°ì €ëŠ” ìš”ì²­ì„ ë³´ë‚¼ ë•Œ í•œë²ˆì— ë°”ë¡œ ë³´ë‚´ì§€ ì•Šê³ , ë¨¼ì € Preflight ìš”ì²­ì„ ë³´ë‚´ ì„œë²„ì™€ ìž˜ í†µì‹ ë˜ëŠ”ì§€ í™•ì¸í•œ í›„ ë³¸ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.
	- ì¦‰, ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ ë¸Œë¼ìš°ì € ìŠ¤ìŠ¤ë¡œ ì•ˆì „í•œ ìš”ì²­ì¸ì§€ í™•ì¸.

###### ì‚¬ì „ ìš”ì²­ ë™ìž‘ ê³¼ì •
1. ë¸Œë¼ìš°ì €ê°€ OPTIONS ìš”ì²­ì„ ë¨¼ì € ë³´ë‚¸ë‹¤.
```http
OPTIONS /data HTTP/1.1
Origin: https://example.com
Access-Control-Request-Method: DELETE
```
2. ì„œë²„ê°€ í—ˆìš© ì—¬ë¶€ë¥¼ ì‘ë‹µí•œë‹¤.
```http
HTTP/1.1 200 OK
Access-Control-Allow-Origin: https://news.example.com
Access-Control-Allow-Methods: GET, DELETE, HEAD, OPTIONS
Access-Control-Allow-Headers: Content-Type
```
- ì´ ê³¼ì •ì´ ëë‚˜ë©´ ë¸Œë¼ìš°ì €ëŠ” ì‹¤ì œ `DELETE` ìš”ì²­ì„ ë³´ë‚¸ë‹¤.

- Preflight Requestì˜ ë¬¸ì œì 
	- ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ Preflight ìš”ì²­ì„ ë³´ë‚´ ë³´ì•ˆì„ ê°•í™”í•˜ëŠ” ëª©ì ì˜ ì·¨ì§€ëŠ” ì¢‹ì§€ë§Œ,
		- ê²°êµ­ ì‹¤ì œ ìš”ì²­ì— ê±¸ë¦¬ëŠ” ì‹œê°„ì´ ëŠ˜ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„±ëŠ¥ ì €í•˜ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.
	- API í˜¸ì¶œ ìˆ˜ê°€ ë§Žì•„ì§ˆìˆ˜ë¡ ì„œë²„ ìš”ì²­ì„ ë°°ë¡œ ë³´ë‚´ê²Œ ë˜ë¯€ë¡œ ë¹„ìš©ì ì¸ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìžˆë‹¤.
	- (ë¸Œë¼ìš°ì € ìºì‹œë¥¼ ì´ìš©í•´ Preflight ìš”ì²­ì„ ìºì‹±ì‹œì¼œ ìµœì í™”ê°€ ê°€ëŠ¥í•˜ë‹¤.)
#### ðŸ¬ ë‹¨ìˆœ ìš”ì²­ (Simple Request)
- Preflight ìš”ì²­ì„ ìƒëžµí•˜ê³  ë°”ë¡œ ì„œë²„ì— ì§í–‰ìœ¼ë¡œ ë³¸ ìš”ì²­ì„ ë³´ë‚¸ í›„,
	- ì„œë²„ê°€ ì´ì— ëŒ€í•œ ì‘ë‹µ í—¤ë”ì— `Access-Control-Allow-Origin` í—¤ë”ë¥¼ ë³´ë‚´ì£¼ë©´ ë¸Œë¼ìš°ì €ê°€ CORS ì •ì±… ìœ„ë°˜ ì—¬ë¶€ë¥¼ ê²€ì‚¬í•˜ëŠ” ë°©ì‹ì´ë‹¤.
###### ë‹¨ìˆœ ìš”ì²­ ê°€ëŠ¥ ì¡°ê±´
1. ìš”ì²­ì˜ ë©”ì†Œë“œëŠ” GET, HEAD, POST ì¤‘ í•˜ë‚˜.
2. `Accept`, `Accept-Language`, `Content-Language`, `Content-Type`, `DPR`, `Downlink`, `Save-Data`, `Viewport-Width`, `Width` í—¤ë”ì¼ ê²½ìš°ì—ë§Œ ì ìš©ëœë‹¤.
3. Content-Type í—¤ë”ê°€ `application/x-www-form-urlencoded`, `multipart/form-data`, `text/plain` ì¤‘ í•˜ë‚˜ì—¬ì•¼ë§Œ í•œë‹¤. ì•„ë‹ ê²½ìš° Preflight Requestë¡œ ë™ìž‘í•œë‹¤.

> ê¹Œë‹¤ë¡œìš´ ì¡°ê±´ì´ ë§Žì•„, ë‹¨ìˆœ ìš”ì²­ì´ ì¼ì–´ë‚˜ëŠ” ìƒí™©ì€ ë“œë¬¼ë‹¤.
	- ëŒ€ë¶€ë¶„ HTTP API ìš”ì²­ì€ `text/xml`ì´ë‚˜ `application/json`ìœ¼ë¡œ í†µì‹ í•˜ë¯€ë¡œ ìœ„ 3ë²ˆì— ìœ„ë°˜ëœë‹¤.
	- ëŒ€ë¶€ë¶„ì˜ API ìš”ì²­ì€ Prefilight Requeestë¡œ ì´ë£¨ì–´ì§„ë‹¤.

#### ðŸ¬ ì¸ì¦ëœ ìš”ì²­ (Credentialed Request)
- ì¿ í‚¤, ì¸ì¦ í† í°, HTTP ì¸ì¦ ë“±ì˜ ìžê²©ì¦ëª…(Credential)ì„ í¬í•¨í•˜ëŠ” ìš”ì²­
- ë¸Œë¼ìš°ì €ê°€ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚¼ ë•Œ ì‚¬ìš©ìžì˜ ì¸ì¦ ì •ë³´(ì„¸ì…˜, JWT, ì¿ í‚¤ ë“±)ë¥¼ í•¨ê»˜ ì „ì†¡í•˜ëŠ” ê²½ìš°ì´ë‹¤.

###### ì¸ì¦ ìš”ì²­ì´ í•„ìš”í•œ ì´ìœ 
- ì¼ë°˜ì ì¸ API ìš”ì²­ì—ì„œëŠ” `Access-Control-Allow-Origin: *` ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ë„ë©”ì¸ì—ì„œ ìš”ì²­ì„ í—ˆìš©í•  ìˆ˜ ìžˆì§€ë§Œ,
	- ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€, ì„¸ì…˜ ì¸ì¦, ì‚¬ìš©ìž ì‹ë³„ì´ í•„ìš”í•œ ê²½ìš°ì—ëŠ” ì¿ í‚¤ë‚˜ ì¸ì¦ í† í°ì´ í¬í•¨ëœ ìš”ì²­ì´ í•„ìš”í•˜ë‹¤.
	- ì´ëŸ¬í•œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ì„œë²„ëŠ” CORSì™€ ê´€ë ¨ëœ ì¶”ê°€ì ì¸ ì„¤ì •ì„ í•´ì•¼ í•œë‹¤.
###### ë™ìž‘ ë°©ì‹
1. í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­ ì‹œ `credentials:"include"`ë¥¼ ì„¤ì •í•œë‹¤.
```javascript
fetch("https://api.example.com/user", {
  method: "GET",
  credentials: "include"
})
  .then(response => response.json())
  .then(data => console.log(data))
  .catch(error => console.error("Error:", error)); 
```
- `credentials` ì˜µì…˜
	- `"omit"` â†’ ì¿ í‚¤ ë° ì¸ì¦ ì •ë³´ ì „ì†¡ ì•ˆ í•¨ (ê¸°ë³¸ê°’)
	- `"same-origin"` â†’ ê°™ì€ ì¶œì²˜ì—ì„œë§Œ ì¿ í‚¤ ë° ì¸ì¦ ì •ë³´ í¬í•¨
	- `"include"` â†’ ë‹¤ë¥¸ ì¶œì²˜ì—ì„œë„ ì¸ì¦ ì •ë³´ í¬í•¨ ê°€ëŠ¥

1. ì„œë²„ê°€ CORS ì‘ë‹µ í—¤ë”ì—ì„œ `Access-Control-Allow-Credentials: true`ë¥¼ ì„¤ì •í•œë‹¤.
	- ì£¼ì˜: `Access-Control-Allow-Origin: *` ì™€ `Access-Control-Allow-Credentials: true`ë¥¼ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. (íŠ¹ì • ë„ë©”ì¸ì„ ëª…ì‹œí•´ì•¼ í•œë‹¤.)
```
Access-Control-Allow-Origin: https://frontend.example.com
Access-Control-Allow-Credentials: true
```
---
### ðŸª í˜„ì—…ì—ì„œì˜ CORS ê´€ë ¨ ê³ ë ¤ ì‚¬í•­
#### ðŸ¬ 1. ë°±ì—”ë“œì—ì„œ CORS ì„¤ì • í•„ìš”
- ex: Spring Boot 
```java
@Configuration
public class WebConfig implements WebMvcConfigurer {
    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping("/api/**")
                .allowedOrigins("https://myfrontend.com")  // íŠ¹ì • ë„ë©”ì¸ í—ˆìš©
                .allowedMethods("GET", "POST", "PUT", "DELETE")
                .allowedHeaders("*")
                .allowCredentials(true);
    }
}
```

#### ðŸ¬ 2. í”„ë¡ì‹œ(Proxy) ì‚¬ìš©í•˜ì—¬ í•´ê²°
- ê°œë°œ í™˜ê²½ì—ì„œ CORS ë¬¸ì œë¥¼ í•´ê²°í•  ë•Œ, í”„ë¡ íŠ¸ì—”ë“œì—ì„œ í”„ë¡ì‹œ ì„œë²„ë¥¼ ì‚¬ìš©í•˜ì—¬ ìš°íšŒí•  ìˆ˜ë„ ìžˆë‹¤.
- ex: Reactì—ì„œ `proxy` ì„¤ì •ì„ í†µí•´ ë°±ì—”ë“œ APIë¥¼ í”„ë¡ì‹œë¡œ ìš”ì²­í•˜ë©´, ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ CORS ë¬¸ì œë¥¼ ë°œìƒì‹œí‚¤ì§€ ì•ŠëŠ”ë‹¤.
- `package.json` ì„¤ì •
```json
"proxy": "http://localhost:8080"
```

#### ðŸ¬ 3. API Gatewayë¥¼ í†µí•œ CORS ê´€ë¦¬
- AWS API Gateway, Nginx ê°™ì€ API Gatewayì—ì„œ CORSë¥¼ ì„¤ì •í•˜ëŠ” ë°©ë²•ë„ ì‚¬ìš©ëœë‹¤.
- í´ë¼ì´ì–¸íŠ¸ê°€ ì§ì ‘ ì„œë²„ì— ì ‘ê·¼í•˜ì§€ ì•Šê³  Gatewayì—ì„œ ìš”ì²­ì„ ì¤‘ê°œí•˜ë©´, ì›ë³¸ ì„œë²„ì˜ CORS ì„¤ì •ì„ ìµœì†Œí™”í•  ìˆ˜ ìžˆë‹¤.
---
## ðŸ§™â€â™‚ï¸ ìš”ì•½

> SOPëŠ” ë³´ì•ˆ ê°•í™”ë¥¼ ìœ„í•´ ì¡´ìž¬í•˜ì§€ë§Œ, ìœ ì—°ì„±ì´ ë¶€ì¡±í•¨ â†’ ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ CORSê°€ ë“±ìž¥.  
> ì„œë²„ê°€ í—ˆìš©í•œ ì¶œì²˜ì— í•œí•´ ì™¸ë¶€ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •í•´ì•¼ í•¨. 

- ì¶œì²˜(Origin): `í”„ë¡œí† ì½œ + í˜¸ìŠ¤íŠ¸ + í¬íŠ¸`
	- SOP(ë™ì¼ ì¶œì²˜ ì •ì±…)ë¡œ ì¸í•´ ë¸Œë¼ìš°ì €ëŠ” ë‹¤ë¥¸ ì¶œì²˜ì˜ ìš”ì²­ì„ ê¸°ë³¸ì ìœ¼ë¡œ ì°¨ë‹¨í•œë‹¤. -> CORS í•„ìš”
- CORS
	- SOPì˜ í•œê³„ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë³´ì•ˆ ì •ì±….
	- ì„œë²„ì—ì„œ `Acess-Control-Allow-Origin` ë“±ì˜ í—¤ë”ë¥¼ ì„¤ì •í•´ íŠ¹ì • ì¶œì²˜ì—ì„œì˜ ìš”ì²­ì„ í—ˆìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤.

- ìš”ì²­ ë°©ì‹ 3ê°€ì§€
	1. ì‚¬ì „ ìš”ì²­(Preflight Request):
		- `GET`,`POST`, `HEAD`ë¥¼ ì œì™¸í•œ ìš”ì²­ (`PUT`, `DELETE` ë“±)
		- ì„œë²„ê°€ í—ˆìš©í•˜ë©´ ì‹¤ì œ ìš”ì²­ì„ ìˆ˜í–‰í•œë‹¤.
		- ì„±ëŠ¥ ì €í•˜ ìš°ë ¤ -> ìºì‹± ê°€ëŠ¥
	2. ë‹¨ìˆœ ìš”ì²­(Simple Request):
		- `GET`, `POST`, `HEAD`, íŠ¹ì • `Content-Type` ì¡°ê±´ ì¶©ì¡± ì‹œ ë°”ë¡œ ìš”ì²­.
	3. ì¸ì¦ëœ ìš”ì²­(Credentialed Request):
		- ì¿ í‚¤ ì¸ì¦ ì •ë³´ í¬í•¨ ì‹œ `credentials: "include"` ì„¤ì • í•„ìš”.
		- ì„œë²„ëŠ” `Access-Control-Allow-Credentials: true` ì„¤ì • í•„ìš”.
---
> **ì°¸ê³ ì‚¬ì´íŠ¸**
> - [01-AWS](https://aws.amazon.com/what-is/cross-origin-resource-sharing/?nc1=h_ls)
> - [02-Inpa Dev](https://inpa.tistory.com/entry/WEB-%F0%9F%93%9A-CORS-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95-%F0%9F%91%8F)
