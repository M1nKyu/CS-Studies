---
created: 2025-02-07 17:19
category:
  - java
tags:
  - TIL
last_modified: 2025-02-08T17:00:00
---
## â­ Mutableê³¼ Immutable
### ğŸª Mutable(ê°€ë³€ ê°ì²´)
- **ê°ì²´ê°€ ìƒì„±ëœ í›„**ì—ë„ ê·¸ **ìƒíƒœë¥¼ ë³€ê²½**í•  ìˆ˜ ìˆëŠ” ê°ì²´.
- **ê°ì²´ì˜ ë‚´ë¶€ ìƒíƒœë¥¼ ìˆ˜ì •**í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ë™ì¼í•œ ê°ì²´ ì°¸ì¡°ë¥¼ ê³µìœ í•˜ëŠ” ëª¨ë“  ë¶€ë¶„ì—ì„œ ë³€ê²½ ì‚¬í•­ì´ ë°˜ì˜ëœë‹¤.
- ìˆ˜ì •ì´ í•„ìš”í•  ê²½ìš° Mutable ê°ì²´ëŠ” **ê¸°ì¡´ ê°ì²´ì— ìˆ˜ì • ì‚¬í•­ì„ ê³§ë°”ë¡œ ë°˜ì˜**í•œë‹¤.
- ê°€ë³€ ê°ì²´ëŠ” ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ **ë³„ë„ì˜ ë™ê¸°í™” ì²˜ë¦¬ê°€ í•„ìš”**í•˜ë‹¤.
- ex: `ArrayList`, `StringBuilder`, `HashMap` ë“±
```java
import java.util.ArrayList;

public class MutableExample {
    public static void main(String[] args) {
        ArrayList<String> list = new ArrayList<>();
        list.add("Hello");
        list.add("World");
        
        // ê°ì²´ ìƒíƒœ ë³€ê²½
        list.set(0, "Hi");
        
        System.out.println(list); // ì¶œë ¥: [Hi, World]
    }
}
```
---
### ğŸª Immutable (ë¶ˆë³€ ê°ì²´)
- **ê°ì²´ê°€ ìƒì„±ëœ í›„**ì—ëŠ” ê·¸ **ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ì—†ëŠ”** ê°ì²´.
- ê°ì²´ì˜ ë‚´ë¶€ ìƒíƒœë¥¼ ìˆ˜ì •í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—, ë™ì¼í•œ ê°ì²´ ì°¸ì¡°ë¥¼ ê³µìœ í•˜ë”ë¼ë„ ìƒíƒœê°€ ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤. **ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•´ì•¼ í•œë‹¤**.
- ê¸°ì¡´ ê°ì²´ëŠ” ê·¸ëŒ€ë¡œ ë‘ê³  **ìˆ˜ì •ì‚¬í•­ì„ ë°˜ì˜í•œ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±**í•œë‹¤.
- ì‹¤ì œ ê°ì²´ì˜ ê°’ì´ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©°, ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì´ ê°ì²´ì— ëŒ€í•œ ì°¸ì¡°ê°’ì„ ë³€ê²½í•œë‹¤.
	- **ê¸°ì¡´ ê°ì²´ëŠ” Garbage**ë¡œ ë‚¨ì•„ìˆë‹¤ê°€ **GCì— ì˜í•´ ì‚¬ë¼ì§„ë‹¤**.
- ë¶ˆë³€ ê°ì²´ëŠ” **Read-only ë©”ì†Œë“œë§Œì„ ì œê³µ**í•˜ì—¬, ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œë„ ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. (ì‹ ë¢°ì„± ë³´ì¥)
- **Setter ë©”ì†Œë“œë¥¼ ì œê³µí•˜ì§€ ì•Šìœ¼ë©°**, ë‚´ë¶€ ìƒíƒœë¥¼ ì œê³µí•˜ëŠ” ë©”ì†Œë“œëŠ” ì œê³µí•˜ì§€ ì•Šê±°ë‚˜ [[ë°©ì–´ì  ë³µì‚¬(Defensive Copy)]]ë¥¼ í†µí•´ ì œê³µëœë‹¤.
- ex: `Stirng`, `LocalDate`, `Wrapper íƒ€ì… (Integer, Float, Boolean...)` ë“±
```java
public class ImmutableExample {
    public static void main(String[] args) {
        String str = "Hello";
        
        // ìƒˆë¡œìš´ ê°ì²´ ìƒì„±
        String newStr = str.concat(" World");
        
        System.out.println(str);    // ì¶œë ¥: Hello
        System.out.println(newStr); // ì¶œë ¥: Hello World
    }
}
```
---
### ğŸª ë¶ˆë³€ ê°ì²´ ìƒì„± ë°©ë²•
#### ğŸ¬ final í‚¤ì›Œë“œ
> ìë°”ì—ì„œ **ë³€ìˆ˜ë“¤ì€ ê¸°ë³¸ì ìœ¼ë¡œ ê°€ë³€ì **ì´ë‹¤. **final í‚¤ì›Œë“œ**ë¥¼ ë¶™ì´ë©´ ì°¸ì¡°ê°’ì„ ë³€ê²½í•  ìˆ˜ ì—†ë„ë¡í•˜ì—¬ **ë¶ˆë³€ì„±ì„ í™•ë³´**í•  ìˆ˜ ìˆë‹¤.
- final ì˜ˆì•½ì–´ëŠ” 
	- `ë³€ìˆ˜`ì— ì‚¬ìš©ì‹œ ê°’ì„ ìˆ˜ì •í•  ìˆ˜ ì—†ëŠ” ìƒìˆ˜ë¡œ ë§Œë“¤ì–´ì£¼ê³ , 
	- `ë©”ì†Œë“œ`ì— ì‚¬ìš©ì‹œ Overridingì„ í•  ìˆ˜ ì—†ê³ , 
	- `í´ë˜ìŠ¤`ì— ì‚¬ìš©ì‹œ ìƒì†ì´ ë¶ˆê°€ëŠ¥ í•˜ë‹¤.
#### ğŸ¬ ë¶ˆë³€ ê°ì²´ë¥¼ ë§Œë“œëŠ” ê¸°ë³¸ ì›ì¹™
1. í´ë˜ìŠ¤ë¥¼ `final`ë¡œ ì„ ì–¸í•˜ì—¬ ìƒì†ì„ ë§‰ëŠ”ë‹¤.
	- í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ ë©¤ë²„ ë³€ìˆ˜ë¥¼ ë³€ê²½í•˜ëŠ” ê²ƒì„ ë°©ì§€í•œë‹¤.
2. ëª¨ë“  í•„ë“œë¥¼ `private final`ë¡œ ì„ ì–¸í•œë‹¤.
	- ì™¸ë¶€ì—ì„œ ì§ì ‘ ë³€ê²½í•  ìˆ˜ ì—†ë„ë¡ í•œë‹¤.
3. Setter ë©”ì„œë“œë¥¼ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.
	- ê°ì²´ ìƒì„± ì´í›„ ìƒíƒœ ë³€ê²½ì„ ë°©ì§€í•œë‹¤.
4. ìƒì„±ìì—ì„œ ëª¨ë“  í•„ë“œë¥¼ ì´ˆê¸°í™”í•œë‹¤.
	- ìƒì„± ì´í›„ ê°’ì„ ë³€ê²½í•  ë°©ë²•ì´ ì—†ë„ë¡ í•œë‹¤.
5. ê°€ë³€ ê°ì²´ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤ë©´, ë³µì‚¬ë³¸ì„ ë§Œë“¤ì–´ ì‚¬ìš©í•œë‹¤.
	- ì›ë³¸ ê°ì²´ì˜ ë³€ê²½ ìœ„í—˜ì„ ë°©ì§€í•œë‹¤.
---
### ğŸª ë¶ˆë³€ ê°ì²´ì˜ ì‚¬ìš© ì´ìœ 
#### ğŸ¬ ë™ê¸°í™” ì—†ì´ë„ ì•ˆì „í•œ(Thread-Safe)í•œ ë©€í‹°ìŠ¤ë ˆë“œ í”„ë¡œê·¸ë˜ë°.
- ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œëŠ” **ê³µìœ  ìì›ì— ëŒ€í•œ ë™ì‹œ ì ‘ê·¼ìœ¼ë¡œ ì¸í•´ ë™ê¸°í™” ë¬¸ì œ**ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
- ê³µìœ  ìì›ì´ **ë¶ˆë³€ì´ë¼ë©´** í•­ìƒ ë™ì¼í•œ ê°’ì„ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— ë™ê¸°í™”ë¥¼ **ê³ ë ¤í•˜ì§€ ì•Šì•„ë„ ëœë‹¤**. 

#### ğŸ¬ ì‹¤íŒ¨ ì›ìì ì¸(Failure Atomic) ë©”ì†Œë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
- ê°€ë³€ê°ì²´ëŠ” ì‘ì—… ë„ì¤‘ ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ ê°ì²´ê°€ ë¶ˆì•ˆì •í•œ ìƒíƒœì— ë¹ ì§ˆ ìˆ˜ ìˆì–´ ì¶”ê°€ì ì¸ ì˜¤ë¥˜ê°€ ìœ ë°œí•  ìˆ˜ ìˆë‹¤.
- ì–´ë– í•œ ì˜ˆì™¸ê°€ ë°œìƒí•´ë„ **ë©”ì†Œë“œ í˜¸ì¶œ ì „ì˜ ìƒíƒœë¥¼ ìœ ì§€**í•˜ì—¬ ì•ˆì •ì ì¸ ì˜ˆì™¸ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤. 

#### ğŸ¬ ìºì‹œ, Map, Set ë“±ì˜ ìš”ì†Œë¡œ ì í•©í•˜ë‹¤.
- ë¶ˆë³€ ê°ì²´ëŠ” **í•´ì‹œê°’ì´ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ**, í•œ ë²ˆ ì €ì¥ í›„ ì¶”ê°€ì ì¸ ì—°ì‚° ì—†ì´ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- **ìºì‹± ë° ìë£Œêµ¬ì¡°ì—**ì„œ **ì•ˆì •ì ì¸ ì„±ëŠ¥**ì„ ì œê³µí•œë‹¤.

#### ğŸ¬ Side Effect ë°©ì§€ ë° ì˜¤ë¥˜ ê°€ëŠ¥ì„± ìµœì†Œí™”
- `Side Effect`ëŠ” ê°ì²´ì˜ **ë‚´ë¶€ ìƒíƒœê°€ ë³€ê²½ë˜ë©´ì„œ ì˜ˆì¸¡í•˜ì§€ ëª»í•œ ë™ì‘ì„ ìœ ë°œí•˜ëŠ” ë¬¸ì œ**ë¥¼ ì˜ë¯¸í•œë‹¤.
- ë¶ˆë³€ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë©´ ìƒíƒœ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥í•˜ë¯€ë¡œ `Side Effect`ê°€ ì—†ëŠ” **ìˆœìˆ˜ í•¨ìˆ˜(Pure Function)** ì„ ì‰½ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.
>`ìˆœìˆ˜í•¨ìˆ˜`: ì–´ë–¤ í•¨ìˆ˜ì— ë™ì¼í•œ ì¸ìë¥¼ ì£¼ì—ˆì„ ë•Œ í•­ìƒ ê°™ì€ ê°’ì„ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ / ì™¸ë¶€ì˜ ìƒíƒœë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜.

#### ğŸ¬ í˜‘ì—… ì‹œ ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê³  ì•ˆì „í•œ ì½”ë“œ ì œê³µ
- ë‹¤ë¥¸ ì‚¬ëŒì´ ì‘ì„±í•œ ì½”ë“œê°€ ë‚´ë¶€ ìƒíƒœë¥¼ ë³€ê²½í•  ê°€ëŠ¥ì„±ì„ ì œê±°í•œë‹¤.
- ì•ˆì „í•˜ê²Œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

#### ğŸ¬ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜(GC) ì„±ëŠ¥ í–¥ìƒ
- ë¶ˆë³€ ê°ì²´ëŠ” í•œ ë²ˆ ìƒì„±ë˜ë©´ ë³€ê²½ë˜ì§€ ì•Šì•„, GCì˜ ìµœì í™”ì— ë„ì›€ì„ ì¤„ ìˆ˜ ìˆë‹¤.
- ë¶ˆë³€ ê°ì²´ë¥¼ í¬í•¨í•˜ëŠ” ì»¨í…Œì´ë„ˆ ê°ì²´(ex: `ImmutableHolder`)ê°€ ì¡´ì¬í•  ê²½ìš°, GCëŠ” ì»¨í…Œì´ë„ˆ ê°ì²´ê°€ ì‚´ì•„ìˆëŠ” í•œ ë‚´ë¶€ ë¶ˆë³€ ê°ì²´ë¥¼ ë¶ˆí•„ìš”í•˜ê²Œ ê²€ì‚¬í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

---
## ğŸ§™â€â™‚ï¸ ìš”ì•½
- Mutable (ê°€ë³€ ê°ì²´)
	- ê°ì²´ ìƒì„± í›„ ìƒíƒœ ë³€ê²½ì´ ê°€ëŠ¥í•˜ë‹¤.
	- ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ë™ê¸°í™”ê°€ í•„ìš”í•˜ë‹¤.
	- `ArrayList`, `StringBuilder`, `HashMap`

- Immutable (ë¶ˆë³€ ê°ì²´)
	- **ê°ì²´ ìƒì„± í›„ ìƒíƒœ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥**í•˜ë‹¤. 
	- ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œë„ ì•ˆì „í•˜ë‹¤. (**Thread-Safe**)
	- Setter ë¯¸ì œê³µ, ë‚´ë¶€ ìƒíƒœë¥¼ ì œê³µí•  ê²½ìš° [[ë°©ì–´ì  ë³µì‚¬(Defensive Copy)]]ë¥¼ ì‚¬ìš©í•œë‹¤.
	- `String`, `LocalDate`, `Integer` ...
  
- ë¶ˆë³€ ê°ì²´ ìƒì„± ì›ì¹™
	- `final` í´ë˜ìŠ¤ ì„ ì–¸ â†’ ìƒì† ë°©ì§€
	- `private final` í•„ë“œ ì„ ì–¸ â†’ ì™¸ë¶€ ë³€ê²½ ë°©ì§€
	- Setter ë¯¸ì œê³µ â†’ ìƒíƒœ ë³€ê²½ ë°©ì§€
	- ìƒì„±ìì—ì„œ í•„ë“œ ì´ˆê¸°í™” â†’ ë³€ê²½ ë¶ˆê°€ëŠ¥ ë³´ì¥
	- ê°€ë³€ ê°ì²´ëŠ” ë³µì‚¬ë³¸ ì‚¬ìš© â†’ ì›ë³¸ ë³´í˜¸

- ë¶ˆë³€ ê°ì²´ì˜ ì¥ì 
	- **Thread-Safe**: ë™ê¸°í™” ì—†ì´ ì•ˆì „í•œ ë©€í‹°ìŠ¤ë ˆë“œ í”„ë¡œê·¸ë˜ë°  
	- **Failure Atomic**: ì˜ˆì™¸ ë°œìƒ ì‹œ ê°ì²´ ìƒíƒœ ìœ ì§€  
	- **íš¨ìœ¨ì ì¸ ìë£Œêµ¬ì¡° í™œìš©**: ìºì‹œ, `Map`, `Set` ë“±ì— ì í•©  
	- **ë¶€ìˆ˜ íš¨ê³¼ ë°©ì§€**: ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê³  ì˜¤ë¥˜ ê°€ëŠ¥ì„± ìµœì†Œí™”  
	- **í˜‘ì—…ì— ìœ ë¦¬**: ì˜ˆì¸¡ ê°€ëŠ¥í•œ ì½”ë“œ ì œê³µ  
	- **GC ì„±ëŠ¥ í–¥ìƒ**: ë¶ˆí•„ìš”í•œ ê°ì²´ ê²€ì‚¬ ìµœì†Œí™”

---
> **ì°¸ê³ ì‚¬ì´íŠ¸**
> - [01](https://choiblack.tistory.com/47)
> - [02](https://s-y-130.tistory.com/181)
> - [03](https://velog.io/@developerwan/%EB%B6%88%EB%B3%80-%EA%B0%9D%EC%B2%B4%EC%97%90-%EB%8C%80%ED%95%9C-%EC%83%9D%EA%B0%81-%EC%A0%95%EB%A6%AC)
