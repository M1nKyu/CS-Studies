---
created: 2025-02-11 17:03
category:
  - network
  - web
tags:
  - TIL
last_modified: 2025-02-11T20:14:00
---
## â­ JWT 
### ðŸª JWT (JSON Web Token) ëž€?
- ì¸ì¦ì— í•„ìš”í•œ ì •ë³´ë“¤ì„ **ì•”í˜¸í™”** ì‹œí‚¨ **JSON í† í°**ì„ ì˜ë¯¸í•œë‹¤.
- ì£¼ë¡œ **ì‚¬ìš©ìž ì¸ì¦** ë° **ì •ë³´ êµí™˜**ì„ ìœ„í•´ ì‚¬ìš©ë˜ë©°, ì„œë²„-í´ë¼ì´ì–¸íŠ¸ ê°„ ì‹ ë¢°ì„±ì„ ìœ ì§€í•˜ëŠ” ì¤‘ìš”í•œ ì—­í• ì„ í•œë‹¤.
- ì›¹ ìƒì—ì„œ ì •ë³´ë¥¼ JSON í˜•íƒœë¡œ ì£¼ê³ ë°›ê¸° ìœ„í•´ í‘œì¤€ ê·œì•½ì— ë”°ë¼ ìƒì„±í•œ ì•”í˜¸í™”ëœ í† í°ìœ¼ë¡œ, **ë³µìž¡í•œ String í˜•íƒœ**ë¡œ ì €ìž¥ë¼ìžˆë‹¤. 
- JSON ë°ì´í„°ë¥¼ **Base64 URL-safe Encode**ë¥¼ í†µí•´ ì¸ì½”ë”©í•˜ì—¬ ì§ë ¥í™”í•œ ê²ƒì´ë‹¤.
- í† í° ë‚´ë¶€ì—ëŠ” ìœ„ë³€ì¡° ë°©ì§€ë¥¼ ìœ„í•œ, ê°œì¸í‚¤ë¥¼ í†µí•œ ì „ìžì„œëª…ë„ ë“¤ì–´ìžˆë‹¤. 
	- ì‚¬ìš©ìžê°€ **JWTë¥¼ ì„œë²„ë¡œ ì „ì†¡**í•˜ë©´, **ì„œë²„ëŠ” ì„œëª…ì„ ê²€ì¦**í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹˜ê²Œ ë˜ë©° ê²€ì¦ì´ ì™„ë£Œë˜ë©´ ìš”ì²­í•œ ì‘ë‹µì„ ëŒë ¤ì¤€ë‹¤.
---
### ðŸª JWTì˜ êµ¬ì„±ìš”ì†Œ
- **í—¤ë”**(Header), **íŽ˜ì´ë¡œë“œ**(Payload), **ì„œëª…**(Signature)ë¡œ êµ¬ì„±ëœë‹¤.
- ê° ë¶€ë¶„ì€ **Base64ë¡œ ì¸ì½”ë”©**ë˜ì–´ ì (.)ìœ¼ë¡œ êµ¬ë¶„ëœë‹¤.
- ![JWT í˜•íƒœ|600x200](https://velog.velcdn.com/images%2Fhahan%2Fpost%2Fb41e147b-69d0-41ad-9f23-5e1ab8ec35ce%2Fimage.png)
	- [ì´ë¯¸ì§€ ì¶œì²˜](https://velog.io/@hahan/JWT%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80)
- ![JWT ì§ë ¥í™” í˜•ì‹|600x250](https://cloud.google.com/static/apigee/docs/api-platform/images/jwt-format.png?hl=ko)
	- [ì´ë¯¸ì§€ ì¶œì²˜](https://cloud.google.com/apigee/docs/api-platform/security/oauth/using-jwt-oauth?hl=ko)
> [JWT.IO](jwt.io) ì‚¬ì´íŠ¸ì—ì„œ JWT í† í°ì„ ì¸ì½”ë”©/ë””ì½”ë”© í•´ë³¼ ìˆ˜ ìžˆë‹¤.
#### í—¤ë” (Header)
- **í† í° íƒ€ìž…**ê³¼ ì‚¬ìš©ëœ **ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜**(í•´ì‹œ ì•Œê³ ë¦¬ì¦˜) ì •ë³´ë¥¼ ë‹´ëŠ”ë‹¤.
```json
{
  "alg": "HS256", // ì„œëª… ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜
  "typ": "JWT"    // í† í° ìœ í˜•
}
```

#### íŽ˜ì´ë¡œë“œ (Payload)
- **ì‚¬ìš©ìžì˜ ì •ë³´** ë° ì¶”ê°€ **ë°ì´í„°**(`Claim`)ì´ í¬í•¨ëœë‹¤.
- payloadì˜ ë‚´ìš©ì€ **ìˆ˜ì •ì´ ê°€ëŠ¥**í•˜ì—¬ ë” ë§Žì€ ì •ë³´ë¥¼ ì¶”ê°€í•  ìˆ˜ ìžˆë‹¤.
	- **ë…¸ì¶œê³¼ ìˆ˜ì •ì´ ê°€ëŠ¥í•œ ì§€ì **ì´ë¯€ë¡œ ìµœì†Œí•œì˜ ì •ë³´ë§Œì„ ë‹´ì•„ì•¼ í•œë‹¤.
```json
// ì¼ë°˜ì ìœ¼ë¡œ í¬í•¨ë˜ëŠ” í´ë ˆìž„
{
  "sub": "1234567890", // ì‚¬ìš©ìžID, ì œëª© (Subject)
  "name": "John Doe",  
  "iat": 1516239022,   // ë°œê¸‰ ì‹œê°„ (Issued At)
  "iss": "example",    // ë°œê¸‰ìž (Issuer)
  "aud": "example"     // ëŒ€ìƒ (Audience)
}
```

#### ì„œëª… (Signature)
- í† í°ì´ **ë³€ì¡°ë˜ì§€ ì•Šì•˜ìŒì„ ê²€ì¦**í•˜ëŠ” ì„œëª…ì´ë‹¤.
- **(í—¤ë” + íŽ˜ì´ë¡œë“œ)** ì™€ ì„œë²„ê°€ ê°–ê³  ìžˆëŠ” **ìœ ì¼í•œ key ê°’ì„ í•©ì¹œ ê²ƒì„ ì•”í˜¸í™”**í•œë‹¤.
	- í—¤ë”ì—ì„œ ì •ì˜í•œ ì•Œê³ ë¦¬ì¦˜ ë°©ì‹(alg)ì„ ì‚¬ìš©í•œë‹¤.

>- **Headerì™€ Payload**ëŠ” **ë‹¨ìˆœížˆ ì¸ì½”ë”©ëœ ê°’**ì´ê¸° ë•Œë¬¸ì— ì œ 3ìžê°€ **ë³µí˜¸í™” ë° ì¡°ìž‘**í•  ìˆ˜ ìžˆì§€ë§Œ, 
>- SignatureëŠ” ì„œë²„ ì¸¡ì—ì„œ ê´€ë¦¬í•˜ëŠ” ë¹„ë°€í‚¤ê°€ ìœ ì¶œë˜ì§€ ì•ŠëŠ” ì´ìƒ ë³µí˜¸í™”í•  ìˆ˜ ì—†ë‹¤. 
>- ë”°ë¼ì„œ **SignatureëŠ”** **í† í°ì˜ ìœ„ë³€ì¡° ì—¬ë¶€ë¥¼ í™•ì¸**í•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤.
---
### ðŸª JWT ì¸ì¦ ê³¼ì •
- ![ì¸ì¦ ê³¼ì •](https://velog.velcdn.com/images%2Fhahan%2Fpost%2Fa2b9ade7-1812-47fc-a07f-f1f00ff5f28d%2Fimage.png)
	- [ì´ë¯¸ì§€ ì¶œì²˜](https://velog.io/@hahan/JWT%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80)

1. ì‚¬ìš©ìžê°€ ID/PWë¥¼ ìž…ë ¥í•˜ì—¬ **ë¡œê·¸ì¸ ìš”ì²­**ì„ í•œë‹¤.
2. ì„œë²„ëŠ” DBì—ì„œ ì‚¬ìš©ìž ì •ë³´ë¥¼ ì¡°íšŒí•˜ê³  ë¹„ë°€ë²ˆí˜¸ë¥¼ ê²€ì¦í•œë‹¤.
	- ì¸ì¦ ì„±ê³µ ì‹œ, **JWTë¥¼ ìƒì„±**í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ **ë°˜í™˜**í•œë‹¤.
	- í´ë¼ì´ì–¸íŠ¸ëŠ” JWTë¥¼ ë¡œì»¬ìŠ¤í† ë¦¬ì§€, ì¿ í‚¤, ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ ë“±ì— ì €ìž¥í•œë‹¤.
3. í´ë¼ì´ì–¸íŠ¸ê°€ **JWTë¥¼ í¬í•¨í•˜ì—¬ APIë¥¼ ìš”ì²­**í•œë‹¤.
	- APIë¥¼ ìš”ì²­í•  ë•Œ, Authorization headerì— **Access Tokenì„ ë‹´ì•„ì„œ ë³´ë‚¸ë‹¤**.
	- JWTëŠ” **ìš”ì²­ë§ˆë‹¤ ì„œë²„ì— ì „ë‹¬**ëœë‹¤. (Stateless, ì„¸ì…˜ í•„ìš” ì—†ìŒ)
4. ì„œë²„ëŠ” **JWTë¥¼ ê²€ì¦**í•˜ì—¬ ìœ íš¨í•œ í† í°ì¸ì§€ í™•ì¸í•œë‹¤.
	- **Signature ê²€ì¦**: í† í°ì´ ë³€ì¡°ë˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.
	- **ë§Œë£Œ ì‹œê°„ ê²€ì¦**: í† í°ì´ ìœ íš¨í•œ ì‹œê°„ ë‚´ì¸ì§€ í™•ì¸í•œë‹¤.
5. ê²€ì¦ì´ í†µê³¼ë˜ë©´ ì„œë²„ëŠ” ìš”ì²­ëœ ë¦¬ì†ŒìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.
	- í´ë¼ì´ì–¸íŠ¸ëŠ” ê³„ì†í•´ì„œ ë™ì¼í•œ JWTë¥¼ ì‚¬ìš©í•˜ì—¬ API ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìžˆë‹¤.
6. í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ìš”ì²­ì„ í–ˆëŠ”ë°, **ë§Œì•½ ì•¡ì„¸ìŠ¤ í† í°ì˜ ì‹œê°„ì´ ë§Œë£Œ**ë˜ë©´
	- í´ë¼ì´ì–¸íŠ¸ëŠ” **ë¦¬í”„ë ˆì‹œ í† í°ì„ ì´ìš©**í•´ì„œ ì„œë²„ë¡œë¶€í„° **ìƒˆë¡œìš´ Access Tokenì„ ë°œê¸‰**ë°›ëŠ”ë‹¤.
---
### ðŸª í† í° ì¸ì¦ì˜ ì‹ ë¢°ì„±
> ìœ ì € JWT: A(Header) + B(Payload) + C(Signature)ì¼ ë•Œ, 
	- ìž„ì˜ì˜ ìœ ì €ê°€ Bë¥¼ ìˆ˜ì •í–ˆë‹¤ê³  ê°€ì • (B -> B')
1. ë‹¤ë¥¸ ìœ ì €ê°€ Bë¥¼ ìž„ì˜ë¡œ ìˆ˜ì • -> ìœ ì € JWT: **A + B'+ C**
2. ìˆ˜ì •í•œ í† í°ì„ ì„œë²„ì— ìš”ì²­ -> ì„œë²„ëŠ” **ìœ íš¨ì„± ê²€ì‚¬ ìˆ˜í–‰**
	- ìœ ì € JWT: A + B'+ C
	- ê²€ì¦ í›„ ìƒì„±í•œ JWT: **A + B'+ C'** (**Signature ë¶ˆì¼ì¹˜**)
3. ëŒ€ì¡° ê²°ê³¼ê°€ ì¼ì¹˜í•˜ì§€ ì•Šì•„ ìœ ì €ì˜ ì •ë³´ê°€ ìž„ì˜ë¡œ **ì¡°ìž‘ë¨ì„ ì•Œ ìˆ˜ ìžˆë‹¤**.

> JWTëŠ” **ì„œëª…(ì¸ì¦)ì´ ëª©ì **ì´ë‹¤.
	- Payload ë¶€ë¶„ì€ ë³µí˜¸í™”ë¥¼ ìˆ˜í–‰í•˜ë©´ ê·¸ëŒ€ë¡œ ë…¸ì¶œëœë‹¤. ê·¸ëž˜ì„œ PayloadëŠ” ë¯¼ê°í•œ ì •ë³´ë¥¼ ë„£ì§€ ë§ì•„ì•¼ í•œë‹¤.
	- í† í°ì˜ ì§„ì§œ ëª©ì ì€ ì •ë³´ ë³´í˜¸ê°€ ì•„ë‹Œ, ìœ„ì¡° ë°©ì§€ì´ë‹¤.
---
### ðŸª JWT ìž¥ë‹¨ì  
#### ðŸ¬ ìž¥ì 
- Headerì™€ Payloadë¡œ Signatureë¥¼ ìƒì„± -> ë°ì´í„° ìœ„ë³€ì¡°ë¥¼ ë§‰ì„ ìˆ˜ ìžˆë‹¤.
- ì¸ì¦ ì •ë³´ì— ëŒ€í•œ ë³„ë„ì˜ ì €ìž¥ì†Œê°€ í•„ìš”ì—†ë‹¤.
- í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ ì •ë³´ë¥¼ ì €ìž¥í•˜ëŠ” ì„¸ì…˜ê³¼ ë‹¤ë¥´ê²Œ, **ì„œë²„ê°€ ë¬´ìƒíƒœ(Stateless)**ì´ë‹¤. -> ì„œë²„ í™•ìž¥ì„± ìš°ìˆ˜
- í† í° ê¸°ë°˜ìœ¼ë¡œ ë‹¤ë¥¸ ë¡œê·¸ì¸ ì‹œìŠ¤í…œì— ì ‘ê·¼ ë° ê¶Œí•œ ê³µìœ ê°€ ê°€ëŠ¥í•˜ë‹¤. (ì¿ í‚¤ì™€ì˜ ì°¨ì´)
- **ëª¨ë°”ì¼ ì–´í”Œë¦¬ì¼€ì´ì…˜ í™˜ê²½**ì—ì„œë„ ìž˜ ë™ìž‘í•œë‹¤. (**ëª¨ë°”ì¼ì€ ì„¸ì…˜ ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥**í•˜ë‹¤.)

#### ðŸ¬ ë‹¨ì 
- Self-Contained: **í† í° ìžì²´ì— ì •ë³´**ë¥¼ ë‹´ê³  ìžˆë‹¤. ì–‘ë‚ ì˜ ê²€ì´ ë  ìˆ˜ ìžˆë‹¤.
- ì •ë³´ê°€ ë§Žì•„ì§ˆìˆ˜ë¡ í† í°ì˜ ê¸¸ì´ê°€ ëŠ˜ì–´ë‚˜ **ë„¤íŠ¸ì›Œí¬ì— ë¶€í•˜**ë¥¼ ì¤„ ìˆ˜ ìžˆë‹¤.
- Payload ìžì²´ëŠ” ì•”í˜¸í™”ê°€ ì•„ë‹Œ Base64 ì¸ì½”ë”©ëœ ê²ƒì´ë¯€ë¡œ, **ì¤‘ê°„ì— Payloadë¥¼ íƒˆì·¨**í•  ìˆ˜ ìžˆë‹¤.
- Stateless íŠ¹ì§•ì„ ê°€ì§€ë¯€ë¡œ, í† í°ì€ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ê´€ë¦¬í•˜ê³  ì €ìž¥í•œë‹¤. ë”°ë¼ì„œ í† í° ìžì²´ë¥¼ íƒˆì·¨ë‹¹í•˜ë©´ ëŒ€ì²˜ê°€ ì–´ë µë‹¤.
---
### ðŸª JWTì˜ Access Token, Refresh Token
> í˜„ì—…ì—ì„œëŠ” **Access Token**, **Refresh Token**ìœ¼ë¡œ ì´ì¤‘ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì¸ì¦í•˜ëŠ” ë°©ì‹ì„ í˜„ì—…ì—ì„œ ì·¨í•œë‹¤
	- JWTë„ ì œ 3ìžì—ê²Œ í† í° íƒˆì·¨ì˜ ìœ„í—˜ì„±ì´ ì¡´ìž¬í•˜ê¸° ë•Œë¬¸.

- Access Tokenê³¼ Refresh Tokenì€ ê°™ì€ JWTì´ë©°, ì–´ë””ì— ì €ìž¥ë˜ê³  ê´€ë¦¬ë˜ëŠëƒì— ë”°ë¥¸ ì‚¬ìš©ì˜ ì°¨ì´ì¼ ë¿ì´ë‹¤.
#### ðŸ¬ Access Token
- í´ë¼ì´ì–¸íŠ¸ê°€ ê°–ê³  ìžˆëŠ” **ì‹¤ì œ ìœ ì €ì˜ ì •ë³´ê°€ ë‹´ê¸´ í† í°**
- í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìš”ì²­ì´ ì˜¤ë©´ ì„œë²„ì—ì„œ í•´ë‹¹ í† í°ì— ìžˆëŠ” ì •ë³´ë¥¼ í™œìš©í•˜ì—¬ ì‚¬ìš©ìž ì •ë³´ì— ë§žê²Œ ì‘ë‹µì„ í•œë‹¤.
#### ðŸ¬ Refresh Token
- **ìƒˆë¡œìš´ Access Tokenì˜ ë°œê¸‰ì„ ìœ„í•´ ì‚¬ìš©**í•œë‹¤.
- ì§§ì€ ìˆ˜ëª…ì„ ê°€ì§€ëŠ” Access Tokenì— ìƒˆë¡œìš´ í† í°ì„ ë°œê¸‰í•´ì£¼ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.
- ë³´í†µ **ë°ì´í„°ë² ì´ìŠ¤ì—** ìœ ì € ì •ë³´ì™€ í•¨ê»˜ ê¸°ë¡í•œë‹¤.
- **Refresh Tokenë„ ë§Œë£Œ**ëœ ê²½ìš° -> ì‚¬ìš©ìžëŠ” **ë‹¤ì‹œ ë¡œê·¸ì¸**í•´ì•¼ í•œë‹¤.

#### ðŸ¬ Access Tokenê³¼ Refresh Token ë¹„êµ (í‘œ)

|ë¹„êµ í•­ëª©|Access Token|Refresh Token|
|---|---|---|
|**ì‚¬ìš© ëª©ì **|API ìš”ì²­ ì¸ì¦ìš©|ìƒˆë¡œìš´ Access Token ë°œê¸‰ìš©|
|**ìœ íš¨ ê¸°ê°„**|ì§§ìŒ (15~60ë¶„)|ê¸¸ìŒ (7ì¼~30ì¼)|
|**ì €ìž¥ ìœ„ì¹˜**|í´ë¼ì´ì–¸íŠ¸ (ë¡œì»¬ìŠ¤í† ë¦¬ì§€, ì¿ í‚¤)|ì„œë²„(DB, Redis)|
|**ë³´ì•ˆ ìœ„í—˜**|íƒˆì·¨ ì‹œ ì•…ìš© ê°€ëŠ¥|íƒˆì·¨ ì‹œ Access Token ë°œê¸‰ ê°€ëŠ¥|
|**ì‚¬ìš© ë°©ì‹**|ëª¨ë“  API ìš”ì²­ë§ˆë‹¤ í¬í•¨|Access Token ìž¬ë°œê¸‰ ì‹œë§Œ ì‚¬ìš©|
|**í•„ìš” ì—¬ë¶€**|í•­ìƒ í•„ìš”|Access Token ë§Œë£Œ ì‹œ í•„ìš”|

---
## ðŸ§™â€â™‚ï¸ ìš”ì•½
- JWT(JSON Web Token)ëž€?
	- ì‚¬ìš©ìž ì¸ì¦ ë° ì •ë³´ êµí™˜ì„ ìœ„í•œ **ì•”í˜¸í™”ëœ JSON í† í°**
	- ì„œë²„-í´ë¼ì´ì–¸íŠ¸ ê°„ **ë¬´ìƒíƒœ(Stateless)** ì¸ì¦ ë°©ì‹
	- êµ¬ì„±ìš”ì†Œ: **Header + Payload + Signature**
	- í•µì‹¬ ëª©ì : **Signatureë¥¼ í†µí•´ í† í° ìœ„ë³€ì¡° ë°©ì§€**

- ìž¥ì :
	- **ì„¸ì…˜ ì €ìž¥ì†Œ ë¶ˆí•„ìš”** -> **ì„œë²„ í™•ìž¥ì„± ìš°ìˆ˜**
	- í† í° **ìœ„ë³€ì¡° ë°©ì§€**
	- **ëª¨ë°”ì¼ í™˜ê²½**ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥

- ë‹¨ì 
	- **Payload ë…¸ì¶œ** ê°€ëŠ¥ 
	- í† í° **íƒˆì·¨ ì‹œ ëŒ€ì‘ ì–´ë ¤ì›€**
	- í† í°ì´ ê¸¸ì–´ì§ˆ ê²½ìš° **ë„¤íŠ¸ì›Œí¬ ë¶€í•˜ ë°œìƒ** ê°€ëŠ¥

- í˜„ì—…ì—ì„œëŠ” ë³´ì•ˆ ê°•í™”ë¥¼ ìœ„í•´ **Access Tokenê³¼ Refresh Tokenì„ í•¨ê»˜ ì‚¬ìš©**í•œë‹¤.
---
## ðŸ“ ì¶”ê°€ í•™ìŠµ
- [[OAuthì™€ JWT Token]]
---
> **ì°¸ê³ ì‚¬ì´íŠ¸**
> - [01-JWT](https://ksh-coding.tistory.com/58)
> - [02-InpaDev(OAuth)](https://inpa.tistory.com/entry/WEB-%F0%9F%93%9A-OAuth-20-%EA%B0%9C%EB%85%90-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC)
> - [03-OAuth](https://ksh-coding.tistory.com/62)
> - [04- OAuthV2 ì •ì±…ì„ ì‚¬ìš©í•˜ì—¬ JWT ì•¡ì„¸ìŠ¤ í† í°ì„ ìƒì„±, í™•ì¸, ê°±ì‹ í•˜ëŠ” ë°©ë²•](https://cloud.google.com/apigee/docs/api-platform/security/oauth/using-jwt-oauth?hl=ko)
> - [05-Access Token, Refresh Token](https://inpa.tistory.com/entry/WEB-%F0%9F%93%9A-Access-Token-Refresh-Token-%EC%9B%90%EB%A6%AC-feat-JWT)
